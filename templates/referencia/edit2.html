<!-- TOP-MENU inicio -->
<div ng-include="'./templates/menu_inicio.html'"></div>
<!-- CONTEXT-MENU  -->
  <div ng-include="'./templates/menu_lateral.html'">
  </div>
  <!-- <h1>{{$parent.settings.pageTitle}}</h1> -->
    
<!-- CONTENIDO MODULO inicio  190.181.59.40 ng-controller="DatosFuncioarioController as v"-->
  <div class="col-md-8 col-sm-8"  >
 <!-- <div > -->
    <div class="row">
      <div class="col-md-12">
        <h2 class="text-primary">
          <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
          {{ajustes.pagina.titulo}}
        </h2>
        <hr class="bg-green">
      </div>
    </div>
  <label class="control-label">Los campos marcados con asterisco (<strong class="fg_red">*</strong>) son obligatorios</label>
  <div class="row">
      <div class="col-md-12" >
      <!-- AQUI VAN LAS TABLAS O FORMULARIOS incrustados ng-controller="apiApppCtrl as vm" -->
      <!-- INICIO -->
       <h3 class="text-primary" align="center">
      Boleta de Referencia Nro. {{referencias.referencia.br_cod}}<br>
    </h3>
    <form name="userForm" novalidate>
      <div class="well well-sm" style="background-color:#fff;" >
        <h4 class="text-center text-primary">I. ESTABLECIMIENTO ORIGEN</h4>
      <hr class="bg-green">   
      <div class="row">
        <div class="col-md-4">
            <label for="nombreesr" class="control-label">Establecimiento que Refiere:</label>
            <input name="nombreesr" disabled class="form-control" id="nombre" type="Text" ng-model="establecimientos.establecimientos.es_nombre">
        </div>
        <div class="col-md-4">
            <label for="resolucion" class="control-label">Red de servicios:</label>
            <input disabled class="form-control" id="red" type="Text" ng-model="establecimientos.reds.red_nombre" >          
        </div>   
        <div class="col-md-3">
            <label class="control-label ">Fecha:</label>
            <div class="input-group">
                  <label class="form-control">{{CurrentDate | date:'dd/MM/yyyy'}} </label>
                  <span class="input-group-addon">
                      <span class="glyphicon glyphicon-calendar"></span>
                  </span>
              </div>
        </div>
        <div class="col-md-3">
                      <label class="control-label ">Hora:</label>
                      <div class="input-group">
                            <label class="form-control">{{CurrentDate | date:'HH:mm:ss'}}</label>
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-time"></span>
                            </span>
                        </div>
        </div>
         <!-- <div class="col-md-4">
            <label for="codref" class="control-label ">Código de Referencia: <strong class="fg_red">*</strong> </label>
            <input name="codref" type="text" class="form-control" placeholder="codigo" ng-model="referencias.br_cod">
            <span class="messages" ng-show="userForm.$submitted || userForm.codref.$touched">
               <span ng-show="userForm.codref.$error.required">El campo es obligatorio.</span>
            </span> 
         </div> --> 
      </div> 
      <hr>
       <h4 class="text-center text-primary">II. FICHA DE IDENTIFICACIÓN</h4>
                    <hr class="bg-green">   
        <div class="row" >
          <div class="col-md-4" >
              <label for="nit" class="control-label">Nombres del paciente: </label>
              <input disabled type="text" class="form-control" id="nomp" ng-model="referencias.persona_paciente.per_nombres">
          </div>  
          <div class="col-md-4" >
              <label for="nit" class="control-label">Apellido Paterno: </label>
              <input disabled type="text" class="form-control" id="appt" ng-model="referencias.persona_paciente.per_apellido_primero">
          </div>  
          <div class="col-md-4" >
              <label for="nit" class="control-label">Apellido Materno: </label>
              <input disabled type="text" class="form-control" id="appm" ng-model="referencias.persona_paciente.per_apellido_segundo">
          </div>   
          </div> 
         <div class="row">
          <div class="col-md-12">
           <label for="resolucion" class="control-label">Domicilio:</label>
          </div>  
        </div> 
        <div class="row" ng-repeat="direccion in referencias.direccion">     
           <div class="col-md-4" >
              <label for="nit" class="control-label">Zona:</label>
              <input disabled type="text" class="form-control" id="nit" placeholder="NIT" ng-model="direccion.dir_zona_comunidad">
          </div>
          <div class="col-md-4">
              <label for="nit" class="control-label">Avenida o Calle:</label>
              <input disabled type="text" class="form-control" id="nit" placeholder="NIT" ng-model="direccion.dir_avenida_calle">
          </div>
          <div class="col-md-4">
              <label for="nit" class="control-label">Número:</label>
              <input disabled type="text" class="form-control" id="nit" placeholder="NIT" ng-model="direccion.dir_numero">
          </div>
          </div>
          <div class="row">
             <!--  <div class="col-md-4">
                  <label for="resolucion" class="control-label">Sexo:</label>
                  <input disabled type="text" class="form-control" id="gen" ng-model="pacientes.persona.per_genero">
              </div> -->
               <div class="col-md-2">
                  <label for="resolucion" class="control-label">Edad:</label>
                  <input disabled type="text" class="form-control" id="gen" ng-model="edad.edad">
              </div>
              <div class="col-md-4">
                <label for="seguro" class="control-label ">Seguro: <strong class="fg_red">*</strong></label>
                <select class="form-control" name="seguro" ng-model="referencias.referencia.br_seguro" required>
                   <option value="LEY 475">LEY 475</option>
                    <option value="INSTITUCIONAL">INSTITUCIONAL</option>
                    <option value="SESO">SESO</option>
                    <option value="OTRO">OTRO</option>
                </select>
                <span class="messages" ng-show="userForm.$submitted || userForm.seguro.$touched">
                <span ng-show="userForm.seguro.$error.required">El campo es obligatorio</span>
                </span> 
            </div>     
        </div> 
        <div class="row">
          <div class="col-md-12">
           <label for="resolucion" class="control-label">Datos Clinicos:</label>
          </div>  
        </div> 
        <div class="row">
          <div class="col-md-2">
              <label for="fc" class="control-label ">F.C.(lpm):<strong class="fg_red">*</strong></label>
              <input name="fc" type="number" ng-model-options="{ updateOn: 'blur' }" class="form-control" id="fc" placeholder="FC" ng-model="referencias.referencia.br_frec_cardiaca" min="0" max="400" required>
              <span class="messages" ng-show="userForm.$submitted || userForm.fc.$touched ">
               <span ng-show="userForm.fc.$error.required">El campo es obligatorio</span>
                <span ng-show="userForm.fc.$error.max">La frecuencia no puede exceder de 400 lpm</span>
               <span ng-show="userForm.fc.$error.min">La frecuencia no puede ser menor de 0 lpm</span>
              </span> 
          </div>  
           <div class="col-md-2">
              <label for="fr" class="control-label ">F.R.(rpm): <strong class="fg_red">*</strong></label>
              <input name="fr" type="number" ng-model-options="{ updateOn: 'blur' }" class="form-control" id="fr" placeholder="FR" ng-model="referencias.referencia.br_frec_resp" min="0" max="150"  required>
               <span class="messages" ng-show="userForm.$submitted || userForm.fr.$touched">
               <span ng-show="userForm.fr.$error.required">El campo es obligatorio</span>
               <span ng-show="userForm.fr.$error.max">La frecuencia no puede exceder de 150 rpm</span>
               <span ng-show="userForm.fr.$error.min">La frecuencia no puede ser menor de 0 rpm</span>
               </span> 
          </div>    
           <div class="col-md-2"><!-- istolica -->
              <label for="pa1" class="control-label ">P.A.S(mmHg): <strong class="fg_red">*</strong></label>
              <input name="pa1" type="number" ng-model-options="{ updateOn: 'blur' }" class="form-control" id="pa1" placeholder="PAS" ng-model="referencias.referencia.br_pa_sistolica" min="0" max="300" required>
              <!-- <p>/</p>
              <input name="pa" type="number" class="form-control" id="pa" placeholder="pa mmHg" ng-model="referencias.br_presion_arterial" min="0" max="300" required> -->
              <span class="messages" ng-show="userForm.$submitted || userForm.pa1.$touched">
               <span ng-show="userForm.pa1.$error.required">El campo es obligatorio</span>
               <span ng-show="userForm.pa1.$error.max">La presión no puede exceder de 300 mmHg</span>
               <span ng-show="userForm.pa1.$error.min">La presión no puede ser menor de 0 mmHg</span>
               </span> 
          </div> 
          <!-- <div class="col-md-1">
            <label for=""> : </label>
            <p><strong>/</strong></p>
          </div> -->
          <div class="col-md-2"><!-- iastolica -->
              <label for="pa" class="control-label ">P.A.D(mmHg): <strong class="fg_red">*</strong></label>
             <input name="pa" type="number" ng-model-options="{ updateOn: 'blur' }" class="form-control" id="pa" placeholder="PAD" ng-model="referencias.referencia.br_pa_diastolica" min="0" max="300" required><!-- <p>/</p>
              <input name="pa" type="number" class="form-control" id="pa" placeholder="pa mmHg" ng-model="referencias.br_presion_arterial" min="0" max="300" required> -->
              <span class="messages" ng-show="userForm.$submitted || userForm.pa.$touched">
               <span ng-show="userForm.pa.$error.required">El campo es obligatorio</span>
               <span ng-show="userForm.pa.$error.max">La presión no puede exceder de 300 mmHg</span>
               <span ng-show="userForm.pa.$error.min">La presión no puede ser menor de 0 mmHg</span>
               </span> 
          </div> 
           <div class="col-md-2">
              <label for="temp" class="control-label">TEMP(°C):<strong class="fg_red">*</strong></label>
              <input name="temp" type="number" ng-model-options="{ updateOn: 'blur' }" class="form-control" id="temp" placeholder="TEMP" ng-model="referencias.referencia.br_temperatura" min="20" max="50" required>
              <span class="messages" ng-show="userForm.$submitted || userForm.temp.$touched ">
               <span ng-show="userForm.temp.$error.required">El campo es obligatorio</span>
               <span ng-show="userForm.temp.$error.max">La temperatura no puede exceder de 50 °C</span>
               <span ng-show="userForm.temp.$error.min">La temperatura no puede ser menor de 20 °C</span>
               </span> 
              
          </div>  
           <div class="col-md-2">
               <label for="peso" class="control-label ">PESO(kg):<strong class="fg_red">*</strong></label>
               <input name="peso" type="number" ng-model-options="{ updateOn: 'blur' }" class="form-control" id="peso" ng-change="calculapeso(referencias.referencia.br_peso,referencias.referencia.br_talla)" placeholder="PESO" ng-model="referencias.referencia.br_peso" min="0.5" max="200" required>
               <span class="messages" ng-show="userForm.$submitted || userForm.peso.$touched">
               <span ng-show="userForm.peso.$error.required">El campo es obligatorio</span>
                <span ng-show="userForm.peso.$error.max">El peso no puede exceder de 250 kg</span>
               <span ng-show="userForm.peso.$error.min">El peso no puede ser menor de 0.5 kg</span>
               </span>
          </div>     
          <div class="col-md-2">
               <label for="talla" class="control-label ">TALLA(m):<strong class="fg_red">*</strong></label>
               <input name="talla" type="number" ng-model-options="{ updateOn: 'blur' }" class="form-control" id="talla" placeholder="TALLA" ng-model="referencias.referencia.br_talla" min="0.1" max="3" ng-change="calculapeso(referencias.referencia.br_peso,referencias.referencia.br_talla)" required>
               <span class="messages" ng-show="userForm.$submitted || userForm.talla.$touched">
               <span ng-show="userForm.talla.$error.required">El campo es obligatorio</span>
                <span ng-show="userForm.talla.$error.max">La talla no puede exceder de 3 metros</span>
               <span ng-show="userForm.talla.$error.min">La talla no puede ser menor de 0.1 metros</span>
               </span>
          </div>     
          <div class="col-md-2">
               <label for="imc" class="control-label ">IMC(kg/m<sup>2</sup>):</label>
               <!-- <input disabled="" name="imc"  class="form-control" id="imc" placeholder="imc" ng-model="imc"   > -->
               <input disabled ng-model="imc2" step="0.01" name="imc" placeholder="imc"  class="form-control"  >
          </div>     

          </div>
           <div class="row">
          <div class="col-md-6">
              <label for="resumenn" class="control-label ">Resumen de Anamnesis y Examen clinico:<strong class="fg_red">*</strong></label>
              <textarea name="resumenn" ng-model-options="{ updateOn: 'blur' }" rows="6" cols="45"  placeholder="Resumen" ng-model="referencias.referencia.br_resumen" style="resize: vertical;min-height:70px;max-height: 150px;" required></textarea>
              <span class="messages" ng-show="userForm.$submitted || userForm.resumenn.$touched">
              <span ng-show="userForm.resumenn.$error.required">El campo es obligatorio</span>
              </span>
          </div>
           <div class="col-md-6">
              <label for="resultados" class="control-label ">Resultados, examenes complementarios de diagnostico:<strong class="fg_red">*</strong></label>
              <textarea name="resultados" ng-model-options="{ updateOn: 'blur' }" rows="6" cols="45" style="resize: vertical;min-height:70px;max-height: 150px;" placeholder="Resultados" ng-model="referencias.referencia.br_resultado_examen"required></textarea>
              <span class="messages" ng-show="userForm.$submitted || userForm.resultados.$touched">
              <span ng-show="userForm.resultados.$error.required">El campo es obligatorio</span>
              </span>
          </div>   
          </div> 
           <div class="row">
              <div class="col-md-6">
                  <label for="diagnostico" class="control-label ">Diagnósticos presuntivos:<strong class="fg_red">*</strong></label><br>
                  <textarea name="diagnostico" ng-model-options="{ updateOn: 'blur' }" rows="6" cols="45" style="resize: vertical;min-height:70px;max-height: 150px;" placeholder="Diagnostico" ng-model="referencias.referencia.br_diagnostico" required></textarea>
                  <span class="messages" ng-show="userForm.$submitted || userForm.diagnostico.$touched">
                  <span ng-show="userForm.diagnostico.$error.required">El campo es obligatorio</span>
                  </span>
              </div>
               <div class="col-md-6">
                  <label for="recomendaciones" class="control-label ">Recomendaciones:<strong class="fg_red">*</strong></label><br>
                  <textarea name="recomendaciones" ng-model-options="{ updateOn: 'blur' }" rows="6" cols="45" style="resize: vertical;min-height:70px;max-height: 150px;" placeholder="Recomendaciones" ng-model="referencias.referencia.br_tratamiento_inicial" required></textarea>
                  <span class="messages" ng-show="userForm.$submitted || userForm.recomendaciones.$touched">
                  <span ng-show="userForm.recomendaciones.$error.required">El campo es obligatorio</span>
                  </span>
              </div>   
          </div>    
        <hr>
      <h4 class="text-center text-primary">III. CONSENTIMIENTO INFORMADO</h4>
                    <hr class="bg-green">

        <div class="row" ><!-- ng-show="referencias.referencia.br_acomp !=null" ng-if="referencias.referencia.br_acomp !=null" -->
            <div class="col-md-6">
                <div class="formulario" >
                    <div class="checkbox" >
                        <input  class="checkbox" type="checkbox" name="acomp" id="M" value="M" ng-model="checkedI" ng-init="checked=false" ng-click="reset_acomp(checkedI)" >
                        <label for="M">Tiene Acompañante</label>
                    </div>
                </div>
            </div>
           <div ng-if="checkedI" class=" col-md-6">
                <label for="acomp" class="control-label ">Acompañante :</label>
                 <input name="acomp" type="text" class="form-control" ng-pattern="patternCadena" id="acomp" placeholder="Acompañante" ng-model="referencias.referencia.br_acomp" >
                  <span class="messages" ng-show="userForm.acomp.$touched">
                <span ng-show="userForm.acomp.$error.pattern">No se admiten símbolos especiales o números.</span>
              </span>
            </div>
        </div> 
        <br> 
      <!--   <hr> -->
        <h4 class="text-center text-primary">IV. NOMBRE Y CARGO DE QUIEN ENVIA AL USUARIO O RESPONSABLE DEL ESTABLECIMIENTO DE SALUD QUE REFIERE</h4>
      <hr class="bg-green">   
        <div class="row">
            <div class="col-md-6">
                 <label class="control-label">Nombres y apellidos:</label>
                 <input disabled type="" class="form-control" id="" ng-model="fun_origen">
            </div>
            <div class="col-md-6">
                <label class="control-label">Cargo:</label>
                    <input disabled type="" class="form-control" id="" ng-model="funcionarios.funcionario_establecimiento.fe_cargo">
            </div>
        </div> 
        <hr> 
        <h4 class="text-center text-primary">V. MOTIVO</h4>
      <hr class="bg-green">
           
        <div class="row">
             <div class="col-md-6">
                  <label for="motivo" class="control-label ">Motivo referencia: <strong class="fg_red">*</strong></label>
                  <select class="form-control" name="motivo" ng-model="referencias.referencia.br_motivo" required>
                      <option value="URGENCIA / EMERGENCIA">URGENCIA / EMERGENCIA</option>
                      <option value="LABORATORIO">LABORATORIO</option>
                      <option value="INTERCONSULTA">INTERCONSULTA</option>
                      <option value="TRATAMIENTO">TRATAMIENTO</option>
                      <option value="ESTUDIO DE GABINETE">ESTUDIO DE GABINETE</option>
                  </select>
                  <span class="messages" ng-show="userForm.$submitted || userForm.motivo.$touched">
                  <span ng-show="userForm.motivo.$error.required">El campo es obligatorio</span>
                  </span> 
              </div> 
              <div class="col-md-6">
                  <label for="sevref" class="control-label ">Servicio Referente:<strong class="fg_red"> *</strong></label>
                  <select name="sevref" class="form-control" ng-model="referencias.referencia.br_servicio_referente" ng-options="presta.ser_nombre as presta.ser_nombre for presta in prestas" required>
                  </select>
                   <span class="messages" ng-show="userForm.$submitted || userForm.sevref.$touched">
                   <span ng-show="userForm.sevref.$error.required">El campo es obligatorio.</span>
                   </span> 
              </div>
          </div>
          <hr>
          <h4 class="text-center text-primary">VI. ESTABLECIMIENTO DE SALUD DESTINO</h4>
      <hr class="bg-green">
        <div class="row">
            <div class="col-md-6">
              <label class="control-label">Establecimiento:</label>
              <input disabled class="form-control" ng-model="referencias.establecimiento_destino.es_nombre">
            </div>       
            <div class="col-md-4">
                 <label for="resolucion"  class="control-label">Subsector:</label>
                 <input disabled class="form-control" ng-model="referencias.referencia.br_subsector">
            </div>   
           <!--   <div class="col-md-4">
                 <label for="resolucion" class="control-label">Servicio destino:</label>
                 <input disabled ng-model="referencias.referencia.br_servicio_destino">
             </div>   --> 
        </div>
        <!-- =========================================================== -->
        
        <div class="row">
              <div class="col-md-6">
                  <label for="sevdes" class="control-label ">Servicio Destino:</label>
                  <select name="sevdes" class="form-control" ng-model="referencias.referencia.br_servicio_destino" ng-options="presta.ser_nombre as presta.ser_nombre for presta in pres" >
                    </select>
                     <span class="messages" ng-show="userForm.$submitted || userForm.sevdes.$touched">
                 <span ng-show="userForm.sevdes.$error.required">El campo es obligatorio.</span>
              </span> 
              </div>
          </div>
        <!-- ************************************* -->
        <br>
        <h4 class="text-center text-primary">VII. CONTACTO CON EL ESTABLECIMIENTO DE SALUD DESTINO</h4>
      <hr class="bg-green">
        <div class="row">
        <div class="col-md-6">
            <!-- <label class="control-label ">Se Contacto al Establecimento:</label>
            <input name="cont" type="checkbox" ng-model="checked" ng-init="checked=false" /> -->
            <div class="formulario">
                      <div class="checkbox">
                      <input class="checkbox" type="checkbox" name="conta" id="contacto" ng-model="checked" ng-init="checked=false">
                      <label for="contacto">Contacto con el Establecimento</label>
                      </div>
            </div><br/>
        </div>
        </div>
       <!--  <br> -->
        <div class="row">
        <div ng-if="checked" class=" col-md-12">
            <label for="perscont" class="control-label ">Nombre de la Persona Contactada:</label>
            <select class="form-control" name="perscont"  ng-model="referencias.referencia.fe_id_contacto" ng-options="funcionario.fun_id as funcionario.per_nombres+' '+funcionario.per_apellido_primero+' '+funcionario.per_apellido_segundo+' - '+funcionario.fun_cargo for funcionario in funcs">
            </select>
           
        </div>
          </div>  
       </div><!-- fin formulario -->
         <!--  <br> -->
         <p ng-show="$parent.ajustes.pagina.success" class="alert alert-success">{{$parent.ajustes.pagina.success}}</p>
         <center>
          <!-- <div class="col-md-2 col-md-offset-3"> -->
                <!-- <div class="modal-footer"> -->
                  <button type="submit" data-toggle="modal"  class="btn btn-primary" ng-disabled="userForm.$invalid" ng-click="save(funcionarios.fun_id,referencias.referencia.fe_id_contacto,referencias.referencia.br_frec_cardiaca,referencias.referencia.br_frec_resp,referencias.referencia.br_pa_sistolica,referencias.referencia.br_temperatura,referencias.referencia.br_peso,referencias.referencia.br_resumen,referencias.referencia.br_resultado_examen,referencias.referencia.br_diagnostico,referencias.referencia.br_tratamiento_inicial,referencias.referencia.br_acomp,referencias.referencia.br_motivo,referencias.referencia.br_seguro,referencias.referencia.br_pa_diastolica,referencias.referencia.br_talla,referencias.referencia.br_servicio_referente,referencias.referencia.br_servicio_destino)"><span class="glyphicon glyphicon-save"></span> EDITAR</button>
         <!-- </div> -->
         <!--  </div> -->
         <!--   <div class="col-md-2 col-md-offset-1"> 
               <div class="modal-footer"> -->
                <a href="#/referencias">
                  <button type="submit" data-toggle="modal"  class="btn btn-danger"  ><span class="glyphicon glyphicon-remove"></span> CANCELAR</button>
                  </a>
                <!-- </div> 
         </div>-->
       </center>
  <!-- FIN -->
  <!-- AQUI VAN LOS TABLAS O FORMULARIOS incrustados -->
     </form>
    

     </div>
<!-- fin cuerpo -->
      </div>
      </div>
    </div>
  </div>
<!-- CONTENIDO MODULO fin -->
<!--  <button type="button" class="btn  btn-resaltar form-signin">REGISTRAR</button> -->

<style type="text/css">
   .messages {
    color: #FA787E;
  }
  form.ng-submitted input.ng-invalid{
    border-color: #FA787E;
  }
 form input.ng-invalid.ng-touched {
    border-color: #FA787E;
  }
 
 /*  form input.ng-valid.ng-touched {
    border-color: #78FA89;
  }
*/  
</style>