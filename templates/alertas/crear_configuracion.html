<!-- TOP-MENU inicio -->
<div ng-include="'./templates/menu_inicio.html'"></div>
<!-- CONTEXT-MENU  -->
<div ng-include="'./templates/menu_lateral.html'"></div>
<!-- CONTENIDO MODULO inicio -->
	<div class="col-md-8 col-sm-8">
		<div class="row">
			<div class="col-md-12">
				<h2 class="text-primary">
					<span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
					{{ajustes.pagina.titulo}}
				</h2>
				<hr>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
			<!-- AQUI VAN LAS TABLAS O FORMULARIOS incrustados -->
			<!-- INICIO -->
			<form name="creaAlerta">
			<!--<form>-->
			<div class="well well-sm" style="background-color:#fff;">
				<div class="row">
					<div class="col-md-12">
						<h3 class="text-primary text-center">Configuración de Alerta Preventiva</h3>
					</div>
				</div>	  
				<div class="row">
					<div class="col-md-8 col-md-offset-2">
					  <div class="form-group">
						<label class="control-label">Seleccione un tipo de alerta:</label>
						  <select name="tipo_alerta" class="form-control" ng-model="configuracion.men_tipo" required>
							  <option value="campania">Alerta programada</option>
							  <option value="prevencion">Alerta para Prevención de enfermedad</option>
							  <option value="vacunacion">Alerta para Vacunación</option>
						  </select>
						  <span class="messages" ng-show="creaAlerta.tipo_alerta.$touched">
    						<span ng-show="creaAlerta.tipo_alerta.$error.required">El campo es obligatorio.</span>
						  </span>
					  </div>
					</div>	  
				</div>	  
				<div class="row">
					<div ng-if="configuracion.men_tipo == 'vacunacion'">
						<div class="col-md-4">
						  <div class="form-group">
							<label class="control-label">Seleccione una vacuna:</label>
							  <select name="vacuna" class="form-control" ng-model="configuracion.vac_id" required>
								  <option ng-repeat="vacuna in vacunas" value="{{vacuna.vac_id}}">{{vacuna.vac_nombre}}</option>
							  </select>
							  <span class="messages" ng-show="creaAlerta.vacuna.$touched">
	    						<span ng-show="creaAlerta.vacuna.$error.required">El campo es obligatorio.</span>
							  </span>
						  </div>
						</div>	  
					</div>
					<div ng-if="configuracion.men_tipo == 'prevencion'">
						<div class="col-md-4">
						  <div class="form-group">
							<label class="control-label">Seleccione enfermedad:</label>
							  <select name="enfermedad" class="form-control" ng-model="configuracion.enf_id" required>
								  <option ng-repeat="enfermedad in enfermedades" value="{{enfermedad.enf_id}}">{{enfermedad.enf_nombre}}</option>
							  </select>
							  <span class="messages" ng-show="creaAlerta.enfermedad.$touched">
	    						<span ng-show="creaAlerta.enfermedad.$error.required">El campo es obligatorio.</span>
							  </span>
						  </div>
						</div>	  
					</div>	  
					<div ng-if="configuracion.men_tipo == 'campania'">
						<div class="col-md-4">
						  	<div class="form-group">
								<label class="control-label">Seleccione enfermedad:</label>
								  <select name="enfermedad" class="form-control" ng-model="configuracion.enf_id" required>
									  <option ng-repeat="enfermedad in enfermedades" value="{{enfermedad.enf_id}}">{{enfermedad.enf_nombre}}</option>
									  
								  </select>
								  <span class="messages" ng-show="creaAlerta.enfermedad.$touched">
		    						<span ng-show="creaAlerta.enfermedad.$error.required">El campo es obligatorio.</span>
								  </span>
						  	</div>
						</div>	  
					</div>	  
				</div>	  
				<div class="row">
					<div ng-if="configuracion.men_tipo == 'campania'">
						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label">Edad inicial de envio [a&ntilde;os]:</label>
								<input name="edad_inicial" type="number" class="form-control" placeholder="Edad inicio" ng-model-options="{ updateOn: 'blur' }" min="1" max="100" ng-model="configuracion.ca_intervalo_inicio_envio" required>
								<span class="messages" ng-show="creaAlerta.edad_inicial.$touched">
		    						<span ng-show="creaAlerta.edad_inicial.$error.required">El campo es obligatorio.</span>
		    						<span ng-show="creaAlerta.edad_inicial.$error.min">La edad debe ser mayor a 0.</span>
		    						<span ng-show="creaAlerta.edad_inicial.$error.max">La edad no debe ser mayor a 100.</span>
								</span>
							</div>	  
						</div>
					</div>
					<div ng-if="configuracion.men_tipo == 'prevencion'">
						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label">Edad inicial de envio [a&ntilde;os]:</label>
								<input name="edad_inicial" type="number" class="form-control" placeholder="Edad inicio" ng-model-options="{ updateOn: 'blur' }" min="1" max="100" ng-model="configuracion.ca_intervalo_inicio_envio" required>
								<span class="messages" ng-show="creaAlerta.edad_inicial.$touched">
	    							<span ng-show="creaAlerta.edad_inicial.$error.required">El campo es obligatorio.</span>
	    							<span ng-show="creaAlerta.edad_inicial.$error.min">La edad debe ser mayor a 0.</span>
	    							<span ng-show="creaAlerta.edad_inicial.$error.max">La edad no debe ser mayor a 100.</span>
							  	</span>
							</div>	  
						</div>
					</div>
					<div ng-if="configuracion.men_tipo == 'campania'">
						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label">Edad final de envio [a&ntilde;os]:</label>
								<input name="edad_final" type="number" class="form-control" placeholder="Edad fin" ng-model-options="{ updateOn: 'blur' }" min="1" max="100" ng-model="configuracion.ca_intervalo_fin_envio" required ng-change="es_menor_igual()">
								<span class="messages" ng-show="creaAlerta.edad_final.$touched">
		    						<span ng-show="creaAlerta.edad_final.$error.required">El campo es obligatorio.</span>
		    						<span ng-show="creaAlerta.edad_final.$error.min">La edad debe ser mayor a 0.</span>
		    						<span ng-show="creaAlerta.edad_final.$error.max">La edad no debe ser mayor a 100.</span>
		    						<div ng-if="!es_menor_igual()">
		    							<span ng-show="creaAlerta.edad_final.$error">La edad final no debe ser menor a la edad inicial
		    							</span>
		    						</div>		
								</span>
							</div>	  
						</div>
					</div>
					<div ng-if="configuracion.men_tipo == 'prevencion'">
						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label">Edad final de envio [a&ntilde;os]:</label>
								<input name="edad_final" type="number" class="form-control" placeholder="Edad fin" ng-model-options="{ updateOn: 'blur' }" min="1" max="100" ng-model="configuracion.ca_intervalo_fin_envio" required>
								<span class="messages" ng-show="creaAlerta.edad_final.$touched">
		    						<span ng-show="creaAlerta.edad_final.$error.required">El campo es obligatorio.</span>
		    						<span ng-show="creaAlerta.edad_final.$error.min">La edad debe ser mayor a 0.</span>
		    						<span ng-show="creaAlerta.edad_final.$error.max">La edad no debe ser mayor a 100.</span>
		    						<div ng-if="!es_menor_igual()">
		    							<span ng-show="creaAlerta.edad_final.$error">La edad final no debe ser menor a la edad inicial
		    							</span>
		    						</div>	
								</span>
							</div>	  
						</div>
					</div>
					<div ng-if="configuracion.men_tipo == 'campania'">
						<div class="col-md-4">
							<!--<div class="form-group">-->
								<label class="control-label">Fecha de campa&ntilde;a:</label>
								<div class='input-group date'>
	                				<input type="text" name="fecha_campania" my-valid-date class="form-control" id="fecha_campania" min="2017-02-16" max="2100-01-01" placeholder="dd-mm-aaaa" ng-model="configuracion.ca_fecha_campania" ng-pattern="patternFecha" required>
	                  				<span class="input-group-addon">
	                      				<span class="glyphicon glyphicon-calendar"></span>
	                  				</span>
	                  			</div>
	               					<span class="messages" ng-show="creaAlerta.fecha_campania.$touched">
			                        	<span ng-show="creaAlerta.fecha_campania.$error.required">El campo es obligatorio.</span>
				                        <span ng-show="!creaAlerta.fecha_campania.$valid">La Fecha no es valida :(.
				                        </span>
				                    </span>
	               				<script>

									 $.datepicker.regional['es'] = {
									 closeText: 'Cerrar',
									 prevText: '< Ant',
									 nextText: 'Sig >',
									 currentText: 'Hoy',
									 monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
									 monthNamesShort: ['Ene','Feb','Mar','Abr', 'May','Jun','Jul','Ago','Sep', 'Oct','Nov','Dic'],
									 dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
									 dayNamesShort: ['Dom','Lun','Mar','Mié','Juv','Vie','Sáb'],
									 dayNamesMin: ['Do','Lu','Ma','Mi','Ju','Vi','Sá'],
									 weekHeader: 'Sm',
									 dateFormat: 'dd-mm-yy',
									 firstDay: 1,
									 isRTL: false,
									 showMonthAfterYear: false,
									 yearSuffix: ''
									 };

									 $.datepicker.setDefaults($.datepicker.regional['es']);
									    $( function() {
									      $( "#fecha_campania" ).datepicker();
									    } );
	               				</script>
						</div>
						 
					</div>
					<div ng-if="configuracion.men_tipo == 'prevencion'">
						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label">Frecuencia de envio [a&ntilde;os]:</label>
								<input name="frecuencia" type="number" class="form-control" placeholder="Introduzca una frecuencia" min="1" max="10" ng-model="configuracion.ca_frecuencia" >
							</div>	  
						</div>
					</div>
				</div>	  
				<div class="row">
					<div ng-if="configuracion.men_tipo == 'campania'">
						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label">Sexo:</label>
								<select name="sexo" class="form-control" ng-model="configuracion.ca_sexo" required>
									<option value="T">Todos</option>
									<option value="F">Femenino</option>
									<option value="M">Masculino</option>
								</select>
								<span class="messages" ng-show="creaAlerta.sexo.$touched">
		    						<span ng-show="creaAlerta.sexo.$error.required">El campo es obligatorio.</span>
								</span>
							</div>	  
						</div>
					</div>
					<div ng-if="configuracion.men_tipo == 'prevencion'">
						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label">Sexo:</label>
								<select name="sexo" class="form-control" ng-model="configuracion.ca_sexo" required>
									<option value="T">Todos</option>
									<option value="F">Femenino</option>
									<option value="M">Masculino</option>
								</select>
								<span class="messages" ng-show="creaAlerta.sexo.$touched">
		    						<span ng-show="creaAlerta.sexo.$error.required">El campo es obligatorio.</span>
								</span>
							</div>	  
						</div>
					</div>
					
				</div>	  
				<div class="row">
					<div class="col-md-12">
						<h3 class="text-primary text-center">Mensaje de la alerta</h3>
					</div>
				</div>	  
				<div class="row">
					<div class="col-md-7">
					    <div class="form-group">
							<label for="nombre" class="control-label">Encabezado del mensaje:</label>
							<textarea name="encabezado" ng-model="configuracion.men_encabezado" rows="2" class="form-control" placeholder="Especifique el encabezado del mensaje" style="resize: vertical;min-height:54px;max-height: 100px;" ng-model-options="{ updateOn: 'blur' }" required ng-pattern="patternCadenaNumero"></textarea>
							<span class="messages" ng-show="creaAlerta.encabezado.$touched">
	    						<span ng-show="creaAlerta.encabezado.$error.required">El campo es obligatorio.</span>
	    						<span ng-show="creaAlerta.encabezado.$error.pattern">No se admiten símbolos especiales.</span>
							</span>
						</div>
						<div class="form-group">
							<label for="resolucion" class="control-label">Cuerpo:</label>
							<textarea name="cuerpo" ng-model="configuracion.men_cuerpo" rows="2" class="form-control" placeholder="Cuerpo de mensaje" style="resize: vertical;min-height:54px;max-height: 100px;" ng-model-options="{ updateOn: 'blur' }" required ng-pattern="patternCadenaNumero"></textarea>
							<span class="messages" ng-show="creaAlerta.cuerpo.$touched">
	    						<span ng-show="creaAlerta.cuerpo.$error.required">El campo es obligatorio.</span>
	    						<span ng-show="creaAlerta.cuerpo.$error.pattern">No se admiten símbolos especiales.</span>
							</span>
						</div>
						<div class="form-group">
							<label for="resolucion" class="control-label">Despedida:</label>
							<textarea name="despedida" ng-model="configuracion.men_despedida" rows="2" class="form-control" placeholder="Despedida de mensaje" style="resize: vertical;min-height:54px;max-height: 100px;"  ng-model-options="{ updateOn: 'blur' }"required ng-pattern="patternCadenaNumero"></textarea>
							<span class="messages" ng-show="creaAlerta.despedida.$touched">
	    						<span ng-show="creaAlerta.despedida.$error.required">El campo es obligatorio.</span>
	    						<span ng-show="creaAlerta.despedida.$error.pattern">No se admiten símbolos especiales.</span>
							</span>
						</div>
						<!--<div class="clearfix"></div>-->
					</div>	  
					<div class="col-md-5">
						<h4 class="text-primary text-center">Vista previa del mensaje</h4>
						<div class="well well-sm" data-spy="affix" data-offset-top="160" data-offset-bottom="200">
							Buenos dias [ Nombre de la persona ]
							<br>
							{{configuracion.men_encabezado}}
							<br>
							{{configuracion.men_cuerpo}}
							<br>
							{{configuracion.men_despedida}}
						</div>
					</div>	  
				</div>	  
				
				
				<div class="row">
					<div class="col-md-4 col-md-offset-4 text-center">
 					  <div ng-if="configuracion.men_tipo == 'vacunacion'">
						<button type="submit" ng-click="submit_vacuna(configuracion)" class="btn btn-primary" ng-disabled="creaAlerta.$invalid"><span class="glyphicon glyphicon-save"></span> Guardar alerta preventiva de vacunación</button>
					  </div>	  
 					  <div ng-if="configuracion.men_tipo == 'prevencion'">
						<button type="submit" ng-click="submit_prevencion(configuracion)" class="btn btn-primary" ng-disabled="creaAlerta.$invalid"><span class="glyphicon glyphicon-save"></span> Guardar alerta de prevención</button>
					  </div>	  
 					  <div ng-if="configuracion.men_tipo == 'campania'">
						<button type="submit" ng-click="submit_campania(configuracion)" class="btn btn-primary" ng-disabled="creaAlerta.$invalid"><span class="glyphicon glyphicon-save"></span> Guardar alerta preventiva programada</button>
					  </div>
					</div>	  
				</div>	  
				
			</div>	
			</form>
			<!-- FIN -->
			<!-- AQUI VAN LOAS TABLAS O FORMULARIOS incrustados -->
			
			</div>
		</div>
	</div>
<!-- CONTENIDO MODULO fin -->